// var layers = [];
// -------------- FUNCTIONS ------------

function maps() {
  var map;
    function initialize() {
      var mapOptions = {
        center: new google.maps.LatLng(37.769884, -122.459793),
        zoom: 10,
        mapTypeId: google.maps.MapTypeId.SATELLITE,
        mapTypeControlOptions: {
          style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
        },
        zoomControlOptions: {
          style: google.maps.ZoomControlStyle.SMALL,
          position: google.maps.ControlPosition.RIGHT_BOTTOM
        },
        panControlOptions: {
          position: google.maps.ControlPosition.RIGHT_BOTTOM
        },
      };
      map = new google.maps.Map(document.getElementById("map"),
          mapOptions);

      // var kmlLayer = new google.maps.KmlLayer({
      //   url: 'https://dl.dropboxusercontent.com/u/22757148/San%20Francisco%20Neighborhood%20Maps.kml'
      // });
      var kmlLayer = new google.maps.KmlLayer({
        url: 'https://maps.google.com/maps/ms?dg=feature&ie=UTF8&authuser=0&msa=0&output=kml&msid=216722849731329970375.0004a2f137271f66502f6'
      });
      var kmlLayer2 = new google.maps.KmlLayer({
        url: 'https://maps.google.com/maps/ms?ie=UTF8&hl=en&source=embed&dg=feature&authuser=0&msa=0&output=kml&msid=216722849731329970375.0004a2f13b9644a6edc2f'
      });
    
      $('#neighbor').on('click', function(){
        $('.container').hide();
        $('#neighbor-container').show();
        kmlLayer.setMap(map);
        kmlLayer.set('preserveViewport', true);
        kmlLayer2.setMap(map);
        kmlLayer2.set('preserveViewport', true);
      })
    }
    
    google.maps.event.addDomListener(window, 'load', initialize);
}

function button_clicks() {
  // $('.map-buttons').on('click', function(){
  //   if ($(this) == $('#neighbor')) {
  //     $('#neighbor-container').show();
  //     console.log($(this))
  //   }
  // })
  $('#prepare').on('click', function(){
    $('.container').hide();
    $('#prepare-container').show();
  })
  $('#advanced-search').on('click', function(){
    $('.container').hide();
    $('#advanced-container').show();
  })
  // $('#neighbor').on('click', function(){
  //   $('#neighbor-container').show();
  // })
}


//  ----------- ON DOCUMENT READY --------------
$(function() {
  $('.container').hide();
  $('.close').on('click', function() {
    $('.container').css('display', 'none');
  })
  // $('#prepare').on('click', function(){
  //   $('.container').show();
  // })
  maps();
  button_clicks();
  $('.map-buttons').on('click', function() {
    $(this).toggleClass('active');
    // $('#container').show();
  })

  // d3.json("planning_neighborhoods.json", function(error, sf) {
  //   if (error) return console.error(error);
  //   console.log(sf);
  // });
  // function toggleLayer(i)
  //   {

  //     if(layers[i].getMap()==null) {
  //        layers[i].setMap(map);
  //     }
  //     else {
  //        layers[i].setMap(null);
  //     }
  //     document.getElementById('neighbor').innerHTML += "toggleLayers("+i+") [setMap("+layers[i].getMap()+"] returns status: "+layers[i].getStatus()+"<br>";
  //   }

  // $("#myModal").modal({show:false });
});